
image:
  repository: outlinewiki/outline
  tag: latest

service:
  type: ClusterIP
  port: 3000

ingress:
  enabled: true
  className: "kong"
  hosts:
    - host: outline.cicd.bitsb.dev
      paths:
        - path: /
          pathType: Prefix
  tls:
    - hosts:
        - outline.cicd.bitsb.dev
      secretName: outline-tls
  annotations:
    cert-manager.io/cluster-issuer: "bitsb-root-ca-issuer"

# OIDC Authentication with Authentik
auth:
  oidc:
    enabled: true
    displayName: "Authentik SSO"
    scopes:
      - openid
      - profile
      - email
    usernameClaim: "preferred_username"

# Reference the external secret for OIDC credentials
extraEnvFrom:
  - secretRef:
      name: outline-oidc-credentials

resources:
  limits:
    cpu: 300m
    memory: 756Mi
  requests:
    cpu: 100m
    memory: 256Mi

postgresql:
  enabled: true
  auth:
    username: outline
    password: outlinepass
    database: outline
    postgresPassword: outlinepass

redis:
  enabled: true
  auth:
    password: CHANGEME